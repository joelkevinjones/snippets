#include <cstdio>
#include <cstdint>
#include <cstdlib>
#include <cerrno>

// Print on standard out hex color triples for the 16 entry or 256 entry
// Macintosh classic ic* color icon types.

// Normally I would do this kind of processing in awk, but the use of signed
// decimal notation from the files
// ~/gitRepos/ResCafe1.4.1/src/MacStandard{16,256Palette}.java instead of
// hexadecimal made using the GNU awk bitwise operators annoying.
static int8_t reds16[] =
   {  -1,  -4,  -1,  -35,  -14,   70,   0,   2,
      31,   0,  86, -112,  -64, -128,  64,   0,
      0 };

static int8_t greens16[] =
   {  -1, -13, 100,    8,    8,    0,   0, -85,
     -73, 100,  44,  113,  -64, -128,  64,   0,
       0 };

static int8_t blues16[] =
   {  -1,   5,   2,    6, -124,  -91, -44, -22,
      20,  17,   5,   58,  -64, -128,  64,   0,
       0 };

static int8_t reds256[] =
   { -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,
     -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,
     -1,-1,-1,-1,-52,-52,-52,-52,-52,-52,-52,-52,-52,-52,-52,-52,
     -52,-52,-52,-52,-52,-52,-52,-52,-52,-52,-52,-52,-52,-52,-52,-52,
     -52,-52,-52,-52,-52,-52,-52,-52,-103,-103,-103,-103,-103,-103,-103,-103,
     -103,-103,-103,-103,-103,-103,-103,-103,-103,-103,-103,-103,-103,-103,-103,-103,
     -103,-103,-103,-103,-103,-103,-103,-103,-103,-103,-103,-103,102,102,102,102,
     102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,
     102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,
      51, 51, 51, 51, 51, 51, 51, 51, 51, 51, 51, 51, 51, 51, 51, 51,
      51, 51, 51, 51, 51, 51, 51, 51, 51, 51, 51, 51, 51, 51, 51, 51,
      51, 51, 51, 51,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
       0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
       0,  0,  0,  0,  0,  0,  0,-18,-35,-69,-86,-120,119, 85, 68, 34,
      17,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
       0,  0,  0,  0,  0,-18,-35,-69,-86,-120,119, 85, 68, 34, 17,  0,
     0 };

static int8_t greens256[] =
   { -1,-1,-1,-1,-1,-1,-52,-52,-52,-52,-52,-52,-103,-103,-103,-103,
     -103,-103,102,102,102,102,102,102, 51, 51, 51, 51, 51, 51,  0,  0,
       0,  0,  0,  0,-1,-1,-1,-1,-1,-1,-52,-52,-52,-52,-52,-52,
     -103,-103,-103,-103,-103,-103,102,102,102,102,102,102, 51, 51, 51, 51,
      51, 51,  0,  0,  0,  0,  0,  0,-1,-1,-1,-1,-1,-1,-52,-52,
     -52,-52,-52,-52,-103,-103,-103,-103,-103,-103,102,102,102,102,102,102,
      51, 51, 51, 51, 51, 51,  0,  0,  0,  0,  0,  0,-1,-1,-1,-1,
     -1,-1,-52,-52,-52,-52,-52,-52,-103,-103,-103,-103,-103,-103,102,102,
     102,102,102,102, 51, 51, 51, 51, 51, 51,  0,  0,  0,  0,  0,  0,
     -1,-1,-1,-1,-1,-1,-52,-52,-52,-52,-52,-52,-103,-103,-103,-103,
     -103,-103,102,102,102,102,102,102, 51, 51, 51, 51, 51, 51,  0,  0,
       0,  0,  0,  0,-1,-1,-1,-1,-1,-1,-52,-52,-52,-52,-52,-52,
     -103,-103,-103,-103,-103,-103,102,102,102,102,102,102, 51, 51, 51, 51,
      51, 51,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
       0,-18,-35,-69,-86,-120,119, 85, 68, 34, 17,  0,  0,  0,  0,  0,
       0,  0,  0,  0,  0,-18,-35,-69,-86,-120,119, 85, 68, 34, 17,  0,
     0 };

static int8_t blues256[] =
   { -1,-52,-103,102, 51,  0,-1,-52,-103,102, 51,  0,-1,-52,-103,102,
      51,  0,-1,-52,-103,102, 51,  0,-1,-52,-103,102, 51,  0,-1,-52,
     -103,102, 51,  0,-1,-52,-103,102, 51,  0,-1,-52,-103,102, 51,  0,
     -1,-52,-103,102, 51,  0,-1,-52,-103,102, 51,  0,-1,-52,-103,102,
      51,  0,-1,-52,-103,102, 51,  0,-1,-52,-103,102, 51,  0,-1,-52,
     -103,102, 51,  0,-1,-52,-103,102, 51,  0,-1,-52,-103,102, 51,  0,
     -1,-52,-103,102, 51,  0,-1,-52,-103,102, 51,  0,-1,-52,-103,102,
      51,  0,-1,-52,-103,102, 51,  0,-1,-52,-103,102, 51,  0,-1,-52,
     -103,102, 51,  0,-1,-52,-103,102, 51,  0,-1,-52,-103,102, 51,  0,
     -1,-52,-103,102, 51,  0,-1,-52,-103,102, 51,  0,-1,-52,-103,102,
      51,  0,-1,-52,-103,102, 51,  0,-1,-52,-103,102, 51,  0,-1,-52,
     -103,102, 51,  0,-1,-52,-103,102, 51,  0,-1,-52,-103,102, 51,  0,
     -1,-52,-103,102, 51,  0,-1,-52,-103,102, 51,  0,-1,-52,-103,102,
      51,  0,-1,-52,-103,102, 51,  0,  0,  0,  0,  0,  0,  0,  0,  0,
       0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,-18,-35,-69,-86,-120,
     119, 85, 68, 34, 17,-18,-35,-69,-86,-120,119, 85, 68, 34, 17,  0,
     0 };

void usage(char* progname)
{
    printf("%s [16|256] # print Macintosh (classic) 16 or 256 entry colormap\n",
           progname);
}

int main(int argc, char* argv[])
{
    errno = 0;
    if (argc <= 1) {
        usage(argv[0]);
	exit(errno);
    }
    long paletteSize = strtol(argv[1], NULL, 10);
    if (errno != 0) {
        usage(argv[0]);
	exit(errno);
    }
    if (paletteSize == 16) {
        for (int i = 0; i < sizeof(reds16)/sizeof(reds16[0]) - 1; i++) {
            printf("%02x%02x%02x\n", reds16[i] & 0xff, greens16[i] & 0xff, 
                   blues16[i] & 0xff);
        }
    } else if (paletteSize == 256) {
        for (int i = 0; i < sizeof(reds256)/sizeof(reds256[0]) - 1; i++) {
            printf("%02x%02x%02x\n", reds256[i] & 0xff, greens256[i] & 0xff, 
                   blues256[i] & 0xff);
        }
    } else {
        usage(argv[0]);
	exit(errno);
    }
}
